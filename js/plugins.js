/**
 * 该文件只保存各种插件或类库，实际调用请写在其他文件中
 *
 * 目录
 * WebApp                 常用方法
 * FastClick              减少点击延迟
 * QRCode                 生成二维码
 * Exif                   获取照片信息
 * MegaPixImage           图片裁剪
 * art-template           模板引擎
 * cxDate                 日期处理
 * cxDialog               对话框
 * cxSelect               联动下拉框
 * cxUpPicture            批量上传图片
 * Swipe                  焦点图
 * ------------------------------ */


/**
 * WebApp
 * @author ciaoca <ciaoca@gmail.com>
 */
!function(a,b){var d,e,c=function(){return this.init.apply(this,arguments)};c.prototype.init=function(a){var b=this,c={debug:!1,timeout:1e4,version:"",storagePrefix:""};b.option=$.extend({},c,a),b.dom={},b.dom.loading=document.createElement("div"),b.dom.loading.setAttribute("id","app_loading"),b.dom.tip=document.createElement("div"),b.dom.tip.setAttribute("id","app_tip"),b.dom.tip.addEventListener("click",b.tipHide.bind(b)),b.dom.qrcode=document.createElement("div"),b.dom.qrcode.setAttribute("id","app_qrcode"),b.dom.qrcode.addEventListener("click",b.qrcodeHide.bind(b)),document.addEventListener("DOMContentLoaded",function(){b.dom.body=document.body})},c.prototype.debug=function(){return this.option.debug&&a.console&&a.console.log?console.log.apply(console,arguments):void 0},c.prototype.isElement=function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},c.prototype.isJquery=function(a){return a&&a.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1},c.prototype.isZepto=function(a){return a&&a.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(a)?!0:!1},c.prototype.isString=function(a){return"string"==typeof a},c.prototype.isNumber=function(a){return"number"==typeof a&&isFinite(a)?!0:!1},c.prototype.isBoolean=function(a){return"boolean"==typeof a},c.prototype.isCallback=function(a){return"function"==typeof a},c.prototype.isArray=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)},c.prototype.isDate=function(a){return a instanceof Date},c.prototype.isRegExp=function(a){return a instanceof RegExp},c.prototype.isError=function(a){return a instanceof Error},c.prototype.isJson=function(a){try{JSON.parse(a)}catch(b){return!1}return!0},c.prototype.setStorage=function(a,b){a&&a.length&&(a=this.option.storagePrefix+a,sessionStorage.setItem(a,JSON.stringify(b)))},c.prototype.getStorage=function(a){return a&&a.length?(a=this.option.storagePrefix+a,sessionStorage.getItem(a)?JSON.parse(sessionStorage.getItem(a)):null):null},c.prototype.removeStorage=function(a){a&&a.length&&(a=this.option.storagePrefix+a,sessionStorage.getItem(a)&&sessionStorage.removeItem(a))},c.prototype.clearStorage=function(){var c,d,e,a=sessionStorage,b=this.option.storagePrefix.length;for(c=0,d=0,e=a.length;e>c;c++)a.key(d).slice(0,b)===this.option.storagePrefix?a.removeItem(a.key(d)):d++},c.prototype.setLocalStorage=function(a,b){a&&a.length&&(a=this.option.storagePrefix+a,localStorage.setItem(a,JSON.stringify(b)))},c.prototype.getLocalStorage=function(a){return a&&a.length?(a=this.option.storagePrefix+a,localStorage.getItem(a)?JSON.parse(localStorage.getItem(a)):null):null},c.prototype.removeLocalStorage=function(a){a&&a.length&&(a=this.option.storagePrefix+a,localStorage.getItem(a)&&localStorage.removeItem(a))},c.prototype.clearLocalStorage=function(){var c,d,e,a=localStorage,b=this.option.storagePrefix.length;for(c=0,d=0,e=a.length;e>c;c++)a.key(d).slice(0,b)===this.option.storagePrefix?a.removeItem(a.key(d)):d++},c.prototype.replaceQuot=function(a,b){return this.isString(a)?(b===!0?(a=a.replace(/&#34;/g,'"'),a=a.replace(/&#39;/g,"'")):(a=a.replace(/"/g,"&#34;"),a=a.replace(/'/g,"&#39;")),a):a},c.prototype.replaceEnter=function(a){return this.isString(a)?(a=a.replace(/\r\n/g,"<br>"),a=a.replace(/\r|\n/g,"<br>")):a},c.prototype.replaceHtml=function(a){return this.isString(a)?(a=this.trim(a),a=a.replace(/"/g,"&#34;"),a=a.replace(/'/g,"&#39;"),a=a.replace(/</g,"&#60;")):a},c.prototype.toFloat=function(a,b){return this.isNumber(b)||(b=0),Math.round(Math.round(a*Math.pow(10,b+1))/10)/Math.pow(10,b)},c.prototype.numberFormat=function(a,b,c,d){return this.isNumber(b)||(b=0),this.isString(c)||(c="."),this.isString(d)||(d=","),a=this.toFloat(a,b),a=a.toFixed(b),a=a.replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,"),a=a.replace(/[\.\,]/g,function(a){return"."===a?c:","===a?d:void 0})},c.prototype.arrayUnique=function(a){var b,c,e,d;if(!this.isArray(a))return a;for(b=[],c={},d=0;null!=(e=a[d]);d++)c[e]||(b.push(e),c[e]=!0);return b},c.prototype.tipShow=function(a){var b=this;"string"==typeof a&&a.length?b.dom.tip.setAttribute("class",a):b.dom.tip.removeAttribute("class"),b.dom.body.appendChild(b.dom.tip)},c.prototype.tipHide=function(){this.dom.body.removeChild(this.dom.tip)},c.prototype.loadingShow=function(a){var b=this;"string"==typeof a&&a.length?b.dom.loading.setAttribute("title",a):b.dom.loading.removeAttribute("title"),b.dom.body.appendChild(b.dom.loading)},c.prototype.loadingHide=function(){this.dom.body.removeChild(this.dom.loading)},c.prototype.qrcodeShow=function(b){var d,f,c=this;"string"==typeof b&&(b={info:b}),b=$.extend({size:0,baseclass:null,before:null,after:null,colorDark:"#000000",colorLight:"#ffffff",quality:"M"},b),0===b.size&&(b.size=a.innerHeight>a.innerWidth?a.innerWidth:a.innerHeight,b.size=43*Math.floor(.7*b.size/43)),d=document.createElement("div"),d.classList.add("qrcode"),d.style.width=b.size+"px",d.style.height=b.size+"px",new QRCode(d,{text:b.info,width:b.size,height:b.size,colorDark:b.colorDark,colorLight:b.colorLight,correctLevel:QRCode.CorrectLevel[b.quality]}),f='<div class="bd"></div>',"string"==typeof b.before&&b.before.length&&(f='<div class="hd">'+b.before+"</div>"+f),"string"==typeof b.after&&b.after.length&&(f+='<div class="ft">'+b.after+"</div>"),f='<div class="main">'+f+"</div>","string"==typeof b.baseclass&&b.baseclass.length&&c.dom.qrcode.attr("class",b.baseclass),c.dom.qrcode.innerHTML=f,c.dom.qrcode.querySelector(".bd").appendChild(d),c.dom.body.appendChild(c.dom.qrcode)},c.prototype.qrcodeHide=function(){this.dom.body.removeChild(this.dom.qrcode),this.dom.qrcode.innerHTML=""},c.prototype.formAjax=function(a,c,e){var g,f=this;if(!f.isJquery(a)&&!f.isZepto(a)){if(!f.isElement(a))return;a=$(a)}g={url:a.attr("action"),type:a.attr("method"),data:a.serializeArray(),dataType:"json",complete:b,success:b,error:b},"function"==typeof c&&(c={success:c}),"function"==typeof e&&(c.error=e),c=$.extend({},g,c),c.urlData&&(c.url+=c.url.indexOf("?")>=0?"&":"?",c.url+=$.param(c.urlData)),Array.isArray(c.addData)&&c.addData.length?c.data=c.data.concat(c.addData):$.isPlainObject(c.addData)&&c.data.push(c.addData),a.find('button[type="submit"]').prop("disabled",!0),$.ajax({url:c.url,type:c.type,data:c.data,dataType:c.dataType}).done(function(b){return a.find('button[type="submit"]').prop("disabled",!1),"function"==typeof c.complete&&c.complete(b),"success"!==b.status?"function"==typeof c.error?(c.error(b),void 0):(d(b),void 0):"function"==typeof c.success?(c.success(b),void 0):(d(b),void 0)}).fail(function(b,c,d){a.find('button[type="submit"]').prop("disabled",!1),$.cxDialog({title:"错误",info:d})})},d=function(a){"string"==typeof a.nextUrl&&a.nextUrl.length?"string"==typeof a.message&&a.message.length?$.cxDialog({title:"提示",info:a.message,ok:function(){"reload"===a.nextUrl?location.reload():location.href=a.nextUrl}}):"reload"===a.nextUrl?location.reload():location.href=a.nextUrl:"string"==typeof a.message&&a.message.length&&$.cxDialog({title:"提示",info:a.message})},c.prototype.smsSend=function(a){var c,d,f,g,h,i,j,k,b=this;if(b.isElement(a)){if(a.dataset.time>0)return c=a.dataset.tip,"string"==typeof c&&c.length||(c="短信正在发送中，请稍等。"),$.cxDialog({title:"提示",info:c}),void 0;if(d={time:60,type:"get"},j={},"string"==typeof a.dataset.url&&a.dataset.url.length?h=a.dataset.url:"a"===a.tagName.toLowerCase()&&(h=a.getAttribute("href")),!h)return $.cxDialog({title:"提示",info:"未定义接口"}),void 0;if("string"==typeof a.dataset.input&&a.dataset.input.length){if(!document.getElementById(a.dataset.input))return $.cxDialog({title:"提示",info:"缺少手机号码输入框"}),void 0;if(f=document.getElementById(a.dataset.input),i=f.value,!i.length||1!=i.slice(0,1)||!/^\d{11}$/.test(i))return f.focus(),void 0;"string"==typeof a.dataset.phoneName&&a.dataset.phoneName.length?j[a.dataset.phoneName]=i:j[f.name]=i}if("string"==typeof a.dataset.captcha&&a.dataset.captcha.length){if(!document.getElementById(a.dataset.input))return $.cxDialog({title:"提示",info:"缺少验证码输入框"}),void 0;if(g=document.getElementById(a.dataset.captcha),captchaValue=g.value,!captchaValue.length)return g.focus(),void 0;"string"==typeof a.dataset.captchaName&&a.dataset.captchaName.length?j[a.dataset.captchaName]=captchaValue:j[g.name]=captchaValue}k=parseInt(a.dataset.second,10),a.dataset.time=isFinite(k)&&k>0?k:d.time,e(a),$.ajax({url:h,type:d.type,data:j,dataType:"json"}).done(function(b){return"success"!==b.status?(a.dataset.time=0,e(a),$.cxDialog({title:"提示",info:b.message}),void 0):void 0}).fail(function(b,c,d){a.dataset.time=0,e(a),$.cxDialog({title:"错误",info:d})})}},e=function(a){var c,b=parseInt(a.dataset.time,10);b>1?(b-=1,c=a.dataset.loopTip,"string"==typeof c&&c.length||(c="正在发送({{time}})"),c=c.replace("{{time}}",b),a.innerHTML=c,a.dataset.time=b,setTimeout(e.bind(this,a),1e3)):(c=a.dataset.endTip,"string"==typeof c&&c.length||(c="重新发送"),a.innerHTML=c,a.dataset.time=0)},a.WebApp=c}(window);


/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 *
 * iOS 8 以上会导致 select 自动收起，已使用该方法修改：
 * https://github.com/ftlabs/fastclick/issues/268#issuecomment-65022184
 */
!function(){"use strict";function a(b,d){function f(a,b){return function(){return a.apply(b,arguments)}}var e,g,h,i,j;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=f(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(e=b.onclick,b.addEventListener("click",function(a){e(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if("select"==b.nodeName.toLowerCase())return!1;if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return d&&!e&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}();



/**
 * @fileoverview
 * - Using the 'QRCode for Javascript library'
 * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.
 * - this library has no dependencies.
 * 
 * @author davidshimjs
 * @see <a href="http://www.d-project.com/" target="_blank">http://www.d-project.com/</a>
 * @see <a href="http://jeromeetienne.github.com/jquery-qrcode/" target="_blank">http://jeromeetienne.github.com/jquery-qrcode/</a>
 */
var QRCode;!function(){function a(a){this.mode=c.MODE_8BIT_BYTE,this.data=a,this.parsedData=[];for(var b=[],d=0,e=this.data.length;e>d;d++){var f=this.data.charCodeAt(d);f>65536?(b[0]=240|(1835008&f)>>>18,b[1]=128|(258048&f)>>>12,b[2]=128|(4032&f)>>>6,b[3]=128|63&f):f>2048?(b[0]=224|(61440&f)>>>12,b[1]=128|(4032&f)>>>6,b[2]=128|63&f):f>128?(b[0]=192|(1984&f)>>>6,b[1]=128|63&f):b[0]=f,this.parsedData=this.parsedData.concat(b)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function b(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function j(a,b){this.totalCount=a,this.dataCount=b}function k(){this.buffer=[],this.length=0}function m(){return"undefined"!=typeof CanvasRenderingContext2D}function n(){var a=!1,b=navigator.userAgent;return/android/i.test(b)&&(a=!0,aMat=b.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(a=parseFloat(aMat[1]))),a}function r(a,b){for(var c=1,e=s(a),f=0,g=l.length;g>=f;f++){var h=0;switch(b){case d.L:h=l[f][0];break;case d.M:h=l[f][1];break;case d.Q:h=l[f][2];break;case d.H:h=l[f][3]}if(h>=e)break;c++}if(c>l.length)throw new Error("Too long data");return c}function s(a){var b=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return b.length+(b.length!=a?3:0)}a.prototype={getLength:function(){return this.parsedData.length},write:function(a){for(var b=0,c=this.parsedData.length;c>b;b++)a.put(this.parsedData[b],8)}},b.prototype={addData:function(b){var c=new a(b);this.dataList.push(c),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[d][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=b.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=f.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){var d=a.createEmptyMovieClip(b,c),e=1;this.make();for(var f=0;f<this.modules.length;f++)for(var g=f*e,h=0;h<this.modules[f].length;h++){var i=h*e,j=this.modules[f][h];j&&(d.beginFill(0,100),d.moveTo(i,g),d.lineTo(i+e,g),d.lineTo(i+e,g+e),d.lineTo(i,g+e),d.endFill())}return d},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=0==b%2)},setupPositionAdjustPattern:function(){for(var a=f.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[d+g][e+h]=-2==g||2==g||-2==h||2==h||0==g&&0==h?!0:!1}},setupTypeNumber:function(a){for(var b=f.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=f.getBCHTypeInfo(c),e=0;15>e;e++){var g=!a&&1==(1&d>>e);6>e?this.modules[e][8]=g:8>e?this.modules[e+1][8]=g:this.modules[this.moduleCount-15+e][8]=g}for(var e=0;15>e;e++){var g=!a&&1==(1&d>>e);8>e?this.modules[8][this.moduleCount-e-1]=g:9>e?this.modules[8][15-e-1+1]=g:this.modules[8][15-e-1]=g}this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,g=0,h=this.moduleCount-1;h>0;h-=2)for(6==h&&h--;;){for(var i=0;2>i;i++)if(null==this.modules[d][h-i]){var j=!1;g<a.length&&(j=1==(1&a[g]>>>e));var k=f.getMask(b,d,h-i);k&&(j=!j),this.modules[d][h-i]=j,e--,-1==e&&(g++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},b.PAD0=236,b.PAD1=17,b.createData=function(a,c,d){for(var e=j.getRSBlocks(a,c),g=new k,h=0;h<d.length;h++){var i=d[h];g.put(i.mode,4),g.put(i.getLength(),f.getLengthInBits(i.mode,a)),i.write(g)}for(var l=0,h=0;h<e.length;h++)l+=e[h].dataCount;if(g.getLengthInBits()>8*l)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*l+")");for(g.getLengthInBits()+4<=8*l&&g.put(0,4);0!=g.getLengthInBits()%8;)g.putBit(!1);for(;;){if(g.getLengthInBits()>=8*l)break;if(g.put(b.PAD0,8),g.getLengthInBits()>=8*l)break;g.put(b.PAD1,8)}return b.createBytes(g,e)},b.createBytes=function(a,b){for(var c=0,d=0,e=0,g=new Array(b.length),h=new Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k;d=Math.max(d,k),e=Math.max(e,l),g[j]=new Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];c+=k;var n=f.getErrorCorrectPolynomial(l),o=new i(g[j],n.getLength()-1),p=o.mod(n);h[j]=new Array(n.getLength()-1);for(var m=0;m<h[j].length;m++){var q=m+p.getLength()-h[j].length;h[j][m]=q>=0?p.get(q):0}}for(var r=0,m=0;m<b.length;m++)r+=b[m].totalCount;for(var s=new Array(r),t=0,m=0;d>m;m++)for(var j=0;j<b.length;j++)m<g[j].length&&(s[t++]=g[j][m]);for(var m=0;e>m;m++)for(var j=0;j<b.length;j++)m<h[j].length&&(s[t++]=h[j][m]);return s};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;f.getBCHDigit(b)-f.getBCHDigit(f.G15)>=0;)b^=f.G15<<f.getBCHDigit(b)-f.getBCHDigit(f.G15);return(a<<10|b)^f.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;f.getBCHDigit(b)-f.getBCHDigit(f.G18)>=0;)b^=f.G18<<f.getBCHDigit(b)-f.getBCHDigit(f.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return f.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case e.PATTERN000:return 0==(b+c)%2;case e.PATTERN001:return 0==b%2;case e.PATTERN010:return 0==c%3;case e.PATTERN011:return 0==(b+c)%3;case e.PATTERN100:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case e.PATTERN101:return 0==b*c%2+b*c%3;case e.PATTERN110:return 0==(b*c%2+b*c%3)%2;case e.PATTERN111:return 0==(b*c%3+(b+c)%2)%2;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new i([1],0),c=0;a>c;c++)b=b.multiply(new i([1,g.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(27>b)switch(a){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(41>b))throw new Error("type:"+b);switch(a){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||(0!=h||0!=i)&&g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;b-1>d;d++)for(var e=0;b-1>e;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,(0==j||4==j)&&(c+=3)}for(var d=0;b>d;d++)for(var e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;b>e;e++)for(var d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;b>e;e++)for(var d=0;b>d;d++)a.isDark(d,e)&&k++;var l=Math.abs(100*k/b/b-50)/5;return c+=10*l}},g={glog:function(a){if(1>a)throw new Error("glog("+a+")");return g.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return g.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},h=0;8>h;h++)g.EXP_TABLE[h]=1<<h;for(var h=8;256>h;h++)g.EXP_TABLE[h]=g.EXP_TABLE[h-4]^g.EXP_TABLE[h-5]^g.EXP_TABLE[h-6]^g.EXP_TABLE[h-8];for(var h=0;255>h;h++)g.LOG_TABLE[g.EXP_TABLE[h]]=h;i.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=new Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=g.gexp(g.glog(this.get(c))+g.glog(a.get(d)));return new i(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=g.glog(this.get(0))-g.glog(a.get(0)),c=new Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(var d=0;d<a.getLength();d++)c[d]^=g.gexp(g.glog(a.get(d))+b);return new i(c,0).mod(a)}},j.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j.getRSBlocks=function(a,b){var c=j.getRsBlockTable(a,b);if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],f=0;d>f;f++)for(var g=c[3*f+0],h=c[3*f+1],i=c[3*f+2],k=0;g>k;k++)e.push(new j(h,i));return e},j.getRsBlockTable=function(a,b){switch(b){case d.L:return j.RS_BLOCK_TABLE[4*(a-1)+0];case d.M:return j.RS_BLOCK_TABLE[4*(a-1)+1];case d.Q:return j.RS_BLOCK_TABLE[4*(a-1)+2];case d.H:return j.RS_BLOCK_TABLE[4*(a-1)+3];default:return void 0}},k.prototype={get:function(a){var b=Math.floor(a/8);return 1==(1&this.buffer[b]>>>7-a%8)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(1&a>>>b-c-1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}};var l=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],o=function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){function g(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}var b=this._htOption,c=this._el,d=a.getModuleCount();Math.floor(b.width/d),Math.floor(b.height/d),this.clear();var h=g("svg",{viewBox:"0 0 "+String(d)+" "+String(d),width:"100%",height:"100%",fill:b.colorLight});h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),c.appendChild(h),h.appendChild(g("rect",{fill:b.colorDark,width:"1",height:"1",id:"template"}));for(var i=0;d>i;i++)for(var j=0;d>j;j++)if(a.isDark(i,j)){var k=g("use",{x:String(i),y:String(j)});k.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),h.appendChild(k)}},a.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},a}(),p="svg"===document.documentElement.tagName.toLowerCase(),q=p?o:m()?function(){function a(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function d(a,b){var c=this;if(c._fFail=b,c._fSuccess=a,null===c._bSupportDataURI){var d=document.createElement("img"),e=function(){c._bSupportDataURI=!1,c._fFail&&_fFail.call(c)},f=function(){c._bSupportDataURI=!0,c._fSuccess&&c._fSuccess.call(c)};return d.onabort=e,d.onerror=e,d.onload=f,d.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}c._bSupportDataURI===!0&&c._fSuccess?c._fSuccess.call(c):c._bSupportDataURI===!1&&c._fFail&&c._fFail.call(c)}if(this._android&&this._android<=2.1){var b=1/window.devicePixelRatio,c=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(a,d,e,f,g,h,i,j){if("nodeName"in a&&/img/i.test(a.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*b;else"undefined"==typeof j&&(arguments[1]*=b,arguments[2]*=b,arguments[3]*=b,arguments[4]*=b);c.apply(this,arguments)}}var e=function(a,b){this._bIsPainted=!1,this._android=n(),this._htOption=b,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=b.width,this._elCanvas.height=b.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return e.prototype.draw=function(a){var b=this._elImage,c=this._oContext,d=this._htOption,e=a.getModuleCount(),f=d.width/e,g=d.height/e,h=Math.round(f),i=Math.round(g);b.style.display="none",this.clear();for(var j=0;e>j;j++)for(var k=0;e>k;k++){var l=a.isDark(j,k),m=k*f,n=j*g;c.strokeStyle=l?d.colorDark:d.colorLight,c.lineWidth=1,c.fillStyle=l?d.colorDark:d.colorLight,c.fillRect(m,n,f,g),c.strokeRect(Math.floor(m)+.5,Math.floor(n)+.5,h,i),c.strokeRect(Math.ceil(m)-.5,Math.ceil(n)-.5,h,i)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&d.call(this,a)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},e}():function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){for(var b=this._htOption,c=this._el,d=a.getModuleCount(),e=Math.floor(b.width/d),f=Math.floor(b.height/d),g=['<table style="border:0;border-collapse:collapse;">'],h=0;d>h;h++){g.push("<tr>");for(var i=0;d>i;i++)g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+e+"px;height:"+f+"px;background-color:"+(a.isDark(h,i)?b.colorDark:b.colorLight)+';"></td>');g.push("</tr>")}g.push("</table>"),c.innerHTML=g.join("");var j=c.childNodes[0],k=(b.width-j.offsetWidth)/2,l=(b.height-j.offsetHeight)/2;k>0&&l>0&&(j.style.margin=l+"px "+k+"px")},a.prototype.clear=function(){this._el.innerHTML=""},a}();QRCode=function(a,b){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:d.H},"string"==typeof b&&(b={text:b}),b)for(var c in b)this._htOption[c]=b[c];"string"==typeof a&&(a=document.getElementById(a)),this._android=n(),this._el=a,this._oQRCode=null,this._oDrawing=new q(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(a){this._oQRCode=new b(r(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._el.title=a,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=d}();

/**
 * Exif.js
 * A JavaScript library for reading EXIF meta data from JPEG image files.
 */
!function(){function i(a){return!!a.exifdata}function j(a,b){var c,d,e,f,g;for(b=b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"",a=a.replace(/^data\:([^\;]+)\;base64,/gim,""),c=atob(a),d=c.length,e=new ArrayBuffer(d),f=new Uint8Array(e),g=0;d>g;g++)f[g]=c.charCodeAt(g);return e}function k(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onload=function(){(200==this.status||0===this.status)&&b(this.response)},c.send()}function l(b,c){function d(a){var d=m(a),e=o(a);b.exifdata=d||{},b.iptcdata=e||{},c&&c.call(b)}var e,f,g;b.src?/^data\:/i.test(b.src)?(e=j(b.src),d(e)):/^blob\:/i.test(b.src)?(f=new FileReader,f.onload=function(a){d(a.target.result)},k(b.src,function(a){f.readAsArrayBuffer(a)})):(g=new XMLHttpRequest,g.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";d(g.response),g=null},g.open("GET",b.src,!0),g.responseType="arraybuffer",g.send(null)):window.FileReader&&(b instanceof window.Blob||b instanceof window.File)&&(f=new FileReader,f.onload=function(b){a&&console.log("Got file of length "+b.target.result.byteLength),d(b.target.result)},f.readAsArrayBuffer(b))}function m(b){var f,d,e,c=new DataView(b);if(a&&console.log("Got file of length "+b.byteLength),255!=c.getUint8(0)||216!=c.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;for(d=2,e=b.byteLength;e>d;){if(255!=c.getUint8(d))return a&&console.log("Not a valid marker at offset "+d+", found: "+c.getUint8(d)),!1;if(f=c.getUint8(d+1),a&&console.log(f),225==f)return a&&console.log("Found 0xFFE1 marker"),u(c,d+4,c.getUint16(d+2)-2);d+=2+c.getUint16(d+2)}}function o(b){var d,e,f,g,h,i,c=new DataView(b);if(a&&console.log("Got file of length "+b.byteLength),255!=c.getUint8(0)||216!=c.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;for(d=2,e=b.byteLength,f=function(a,b){return 56===a.getUint8(b)&&66===a.getUint8(b+1)&&73===a.getUint8(b+2)&&77===a.getUint8(b+3)&&4===a.getUint8(b+4)&&4===a.getUint8(b+5)};e>d;){if(f(c,d))return g=c.getUint8(d+7),0!==g%2&&(g+=1),0===g&&(g=4),h=d+8+g,i=c.getUint16(d+6+g),q(b,h,i);d++}}function q(a,b,c){for(var f,g,h,i,j,d=new DataView(a),e={},k=b;b+c>k;)28===d.getUint8(k)&&2===d.getUint8(k+1)&&(i=d.getUint8(k+2),i in p&&(h=d.getInt16(k+3),j=h+5,g=p[i],f=t(d,k+5,h),e.hasOwnProperty(g)?e[g]instanceof Array?e[g].push(f):e[g]=[e[g],f]:e[g]=f)),k++;return e}function r(b,c,d,e,f){var i,j,k,g=b.getUint16(d,!f),h={};for(k=0;g>k;k++)i=d+12*k+2,j=e[b.getUint16(i,!f)],!j&&a&&console.log("Unknown tag: "+b.getUint16(i,!f)),h[j]=s(b,i,c,d,f);return h}function s(a,b,c,d,e){var i,j,k,l,m,n,f=a.getUint16(b+2,!e),g=a.getUint32(b+4,!e),h=a.getUint32(b+8,!e)+c;switch(f){case 1:case 7:if(1==g)return a.getUint8(b+8,!e);for(i=g>4?h:b+8,j=[],l=0;g>l;l++)j[l]=a.getUint8(i+l);return j;case 2:return i=g>4?h:b+8,t(a,i,g-1);case 3:if(1==g)return a.getUint16(b+8,!e);for(i=g>2?h:b+8,j=[],l=0;g>l;l++)j[l]=a.getUint16(i+2*l,!e);return j;case 4:if(1==g)return a.getUint32(b+8,!e);for(j=[],l=0;g>l;l++)j[l]=a.getUint32(h+4*l,!e);return j;case 5:if(1==g)return m=a.getUint32(h,!e),n=a.getUint32(h+4,!e),k=new Number(m/n),k.numerator=m,k.denominator=n,k;for(j=[],l=0;g>l;l++)m=a.getUint32(h+8*l,!e),n=a.getUint32(h+4+8*l,!e),j[l]=new Number(m/n),j[l].numerator=m,j[l].denominator=n;return j;case 9:if(1==g)return a.getInt32(b+8,!e);for(j=[],l=0;g>l;l++)j[l]=a.getInt32(h+4*l,!e);return j;case 10:if(1==g)return a.getInt32(h,!e)/a.getInt32(h+4,!e);for(j=[],l=0;g>l;l++)j[l]=a.getInt32(h+8*l,!e)/a.getInt32(h+4+8*l,!e);return j}}function t(a,b,c){var d="";for(n=b;b+c>n;n++)d+=String.fromCharCode(a.getUint8(n));return d}function u(b,c){var h,i,j,k,l,m,n;if("Exif"!=t(b,c,4))return a&&console.log("Not valid EXIF data! "+t(b,c,4)),!1;if(m=c+6,18761==b.getUint16(m))h=!1;else{if(19789!=b.getUint16(m))return a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;h=!0}if(42!=b.getUint16(m+2,!h))return a&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(n=b.getUint32(m+4,!h),8>n)return a&&console.log("Not valid TIFF data! (First offset less than 8)",b.getUint32(m+4,!h)),!1;if(i=r(b,m,m+n,e,h),i.ExifIFDPointer){k=r(b,m,m+i.ExifIFDPointer,d,h);for(j in k){switch(j){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":k[j]=g[j][k[j]];break;case"ExifVersion":case"FlashpixVersion":k[j]=String.fromCharCode(k[j][0],k[j][1],k[j][2],k[j][3]);break;case"ComponentsConfiguration":k[j]=g.Components[k[j][0]]+g.Components[k[j][1]]+g.Components[k[j][2]]+g.Components[k[j][3]]}i[j]=k[j]}}if(i.GPSInfoIFDPointer){l=r(b,m,m+i.GPSInfoIFDPointer,f,h);for(j in l){switch(j){case"GPSVersionID":l[j]=l[j][0]+"."+l[j][1]+"."+l[j][2]+"."+l[j][3]}i[j]=l[j]}}return i}var d,e,f,g,p,a=!1,b=this,c=function(a){return a instanceof c?a:this instanceof c?(this.EXIFwrapped=a,void 0):new c(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.EXIF=c):b.EXIF=c,d=c.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},e=c.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=c.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},g=c.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},p={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"},c.getData=function(a,b){return(a instanceof Image||a instanceof HTMLImageElement)&&!a.complete?!1:(i(a)?b&&b.call(a):l(a,b),!0)},c.getTag=function(a,b){return i(a)?a.exifdata[b]:void 0},c.getAllTags=function(a){if(!i(a))return{};var b,c=a.exifdata,d={};for(b in c)c.hasOwnProperty(b)&&(d[b]=c[b]);return d},c.pretty=function(a){if(!i(a))return"";var b,c=a.exifdata,d="";for(b in c)c.hasOwnProperty(b)&&(d+="object"==typeof c[b]?c[b]instanceof Number?b+" : "+c[b]+" ["+c[b].numerator+"/"+c[b].denominator+"]\r\n":b+" : ["+c[b].length+" values]\r\n":b+" : "+c[b]+"\r\n");return d},c.readFromBinaryFile=function(a){return m(a)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return c})}.call(this);


/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */
!function(){function a(a){var d,e,b=a.naturalWidth,c=a.naturalHeight;return b*c>1048576?(d=document.createElement("canvas"),d.width=d.height=1,e=d.getContext("2d"),e.drawImage(a,-b+1,0),0===e.getImageData(0,0,1,1).data[3]):!1}function b(a,b,c){var e,f,g,h,i,j,k,d=document.createElement("canvas");for(d.width=1,d.height=c,e=d.getContext("2d"),e.drawImage(a,0,0),f=e.getImageData(0,0,1,c).data,g=0,h=c,i=c;i>g;)j=f[4*(i-1)+3],0===j?h=i:g=i,i=h+g>>1;return k=i/c,0===k?1:k}function c(a,b,c){var e=document.createElement("canvas");return d(a,e,b,c),e.toDataURL("image/jpeg",b.quality||.8)}function d(c,d,f,g){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,h=c.naturalWidth,i=c.naturalHeight;if(h+i){for(j=f.width,k=f.height,l=d.getContext("2d"),l.save(),e(d,l,j,k,f.orientation),m=a(c),m&&(h/=2,i/=2),n=1024,o=document.createElement("canvas"),o.width=o.height=n,p=o.getContext("2d"),q=g?b(c,h,i):1,r=Math.ceil(n*j/h),s=Math.ceil(n*k/i/q),t=0,u=0;i>t;){for(v=0,w=0;h>v;)p.clearRect(0,0,n,n),p.drawImage(c,-v,-t),l.drawImage(o,0,0,n,n,w,u,r,s),v+=n,w+=r;t+=n,u+=s}l.restore(),o=p=null}}function e(a,b,c,d,e){switch(e){case 5:case 6:case 7:case 8:a.width=d,a.height=c;break;default:a.width=c,a.height=d}switch(e){case 2:b.translate(c,0),b.scale(-1,1);break;case 3:b.translate(c,d),b.rotate(Math.PI);break;case 4:b.translate(0,d),b.scale(1,-1);break;case 5:b.rotate(.5*Math.PI),b.scale(1,-1);break;case 6:b.rotate(.5*Math.PI),b.translate(0,-d);break;case 7:b.rotate(.5*Math.PI),b.translate(c,-d),b.scale(-1,1);break;case 8:b.rotate(-.5*Math.PI),b.translate(-c,0)}}function g(a){var b,c;if(window.Blob&&a instanceof Blob){if(!f)throw Error("No createObjectURL function found to create blob url");b=new Image,b.src=f.createObjectURL(a),this.blob=a,a=b}a.naturalWidth||a.naturalHeight||(c=this,a.onload=a.onerror=function(){var b,d,a=c.imageLoadListeners;if(a)for(c.imageLoadListeners=null,b=0,d=a.length;d>b;b++)a[b]()},this.imageLoadListeners=[]),this.srcImage=a}var f=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;g.prototype.render=function(a,b,e){var g,h,i,j,k,l,m,n,o,p,q;if(this.imageLoadListeners)return g=this,this.imageLoadListeners.push(function(){g.render(a,b,e)}),void 0;b=b||{},h=this.srcImage.naturalWidth,i=this.srcImage.naturalHeight,j=b.width,k=b.height,l=b.maxWidth,m=b.maxHeight,n=!this.blob||"image/jpeg"===this.blob.type,j&&!k?k=i*j/h<<0:k&&!j?j=h*k/i<<0:(j=h,k=i),l&&j>l&&(j=l,k=i*j/h<<0),m&&k>m&&(k=m,j=h*k/i<<0),o={width:j,height:k};for(p in b)o[p]=b[p];q=a.tagName.toLowerCase(),"img"===q?a.src=c(this.srcImage,o,n):"canvas"===q&&d(this.srcImage,a,o,n),"function"==typeof this.onrender&&this.onrender(a),e&&e(),this.blob&&(this.blob=null,f.revokeObjectURL(this.srcImage.src))},"function"==typeof define&&define.amd?define([],function(){return g}):"object"==typeof exports?module.exports=g:this.MegaPixImage=g}();


/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/
!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(y)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;e.openTag="{{",e.closeTag="}}";var z=function(a,b){var c=b.split(":"),d=c.shift(),e=c.join(":")||"";return e&&(e=", "+e),"$helpers."+d+"("+a+e+")"};e.parser=function(a){a=a.replace(/^\s/,"");var b=a.split(" "),c=b.shift(),e=b.join(" ");switch(c){case"if":a="if("+e+"){";break;case"else":b="if"===b.shift()?" if("+b.join(" ")+")":"",a="}else"+b+"{";break;case"/if":a="}";break;case"each":var f=b[0]||"$data",g=b[1]||"as",h=b[2]||"$value",i=b[3]||"$index",j=h+","+i;"as"!==g&&(f="[]"),a="$each("+f+",function("+j+"){";break;case"/each":a="});";break;case"echo":a="print("+e+");";break;case"print":case"include":a=c+"("+b.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(e)){var k=!0;0===a.indexOf("#")&&(a=a.substr(1),k=!1);for(var l=0,m=a.split("|"),n=m.length,o=m[l++];n>l;l++)o=z(o,m[l]);a=(k?"=":"=#")+o}else a=d.helpers[c]?"=#"+c+"("+b.join(",")+");":"="+a}return a},"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}();


/*!
 * cxDate 1.0
 * http://code.ciaoca.com/
 * https://github.com/ciaoca/cxDate
 * E-mail: ciaoca@gmail.com
 * Released under the MIT license
 * Date: 2014-03-25
 *
 * @param {string}    style 格式化的样式
 * @param {string|int}  time  需要格式化的时间
 */
/*!
 * cxDate Multi-Language
 * 多语言配置文件
 */
cxDateLanguages = {
  'zh-cn': {
    monthAbbr: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
    monthName: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
    weekAbbr: ['日', '一', '二', '三', '四', '五', '六'],
    weekName: ['日', '一', '二', '三', '四', '五', '六'],
    amName: ['上午', '下午'],
    AMName: ['上午', '下午']
  }
};
!function(a){var c=function(){return c.decode.apply(c,arguments)};c.DEFAULTS={language:{monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],weekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],amName:["am","pm"],AMName:["AM","PM"]}},c.getLanguage=function(){var a,b;return"object"==typeof cxDateLanguages?(b=cxDateLanguages,"string"==typeof navigator.language?a=navigator.language.toLowerCase():"string"==typeof navigator.browserLanguage&&(a=navigator.browserLanguage.toLowerCase()),a="string"==typeof a&&"object"==typeof b[a]?b[a]:this.DEFAULTS.language):a=this.DEFAULTS.language,a},c.language=c.getLanguage(),c.getAttr=function(a){var b=this,c={};return c.YYYY=a.getFullYear(),c.YY=c.YYYY.toString(10).slice(-2),c.M=a.getMonth()+1,c.MM=c.M<10?"0"+c.M:c.M,c.MMM=function(a){return b.language.monthAbbr[a]},c.MMMM=function(a){return b.language.monthName[a]},c.D=a.getDate(),c.DD=c.D<10?"0"+c.D:c.D,c.d=a.getDay(),c.dd=c.d+1,c.ddd=function(a){return b.language.weekAbbr[a]},c.dddd=function(a){return b.language.weekName[a]},c.H=a.getHours(),c.HH=c.H<10?"0"+c.H:c.H,c.h=c.H>12?c.H-12:c.H,c.hh=c.h<10?"0"+c.h:c.h,c.m=a.getMinutes(),c.mm=c.m<10?"0"+c.m:c.m,c.s=a.getSeconds(),c.ss=c.s<10?"0"+c.s:c.s,c.H>12?(c.A=this.language.AMName[1],c.a=this.language.amName[1]):(c.A=this.language.AMName[0],c.a=this.language.amName[0]),c},c.format=function(a,b){var c=b,d="{;}",e="{;;}",f="{.}",g="{..}";return c=c.replace(/YYYY/g,a.YYYY),c=c.replace(/YY/g,a.YY),c=c.replace(/MMMM/g,e),c=c.replace(/MMM/g,d),c=c.replace(/MM/g,a.MM),c=c.replace(/M/g,a.M),c=c.replace(/DD/g,a.DD),c=c.replace(/D/g,a.D),c=c.replace(/dddd/g,g),c=c.replace(/ddd/g,f),c=c.replace(/dd/g,a.dd),c=c.replace(/d/g,a.d),c=c.replace(/HH/g,a.HH),c=c.replace(/H/g,a.H),c=c.replace(/hh/g,a.hh),c=c.replace(/h/g,a.h),c=c.replace(/mm/g,a.mm),c=c.replace(/m/g,a.m),c=c.replace(/ss/g,a.ss),c=c.replace(/s/g,a.s),c=c.replace(/A/g,a.A),c=c.replace(/a/g,a.a),c=c.replace(new RegExp(e,"g"),a.MMMM(a.M)),c=c.replace(new RegExp(d,"g"),a.MMM(a.M)),c=c.replace(new RegExp(g,"g"),a.dddd(a.d)),c=c.replace(new RegExp(f,"g"),a.ddd(a.d))},c.decode=function(a,b){var c,d;return"string"!=typeof a?!1:("string"==typeof b?(b=b.replace(/[\.-]/g,"/"),b=Date.parse(b)):"number"==typeof b?b=parseInt(b,10):(b=new Date,b=b.getTime()),isNaN(b)?!1:(c=new Date,c.setTime(b),isNaN(c.getFullYear())?!1:(d=this.getAttr(c),text=this.format(d,a))))},a.cxDate=c}(window);


/*!
 * jQuery cxDialog 1.2.3
 * http://code.ciaoca.com/
 * https://github.com/ciaoca/cxDialog
 * E-mail: ciaoca@gmail.com
 * Released under the MIT license
 * Date: 2016-03-24
 *
 * 简易调用：$.cxDialog(string[, ok, no])
 * 完整方法：$.cxDialog(opt)
 * @param {object|string} opt 参数设置 or 内容
 *   title {string} 标题
 *   info {string|dom} 内容
 *   ok {fn} 点击确认时的回调函数
 *   okText {string} 确认按钮文字
 *   no {fn} 点击取消时的回调函数
 *   noText {string} 取消按钮文字
 *   buttons {array} 自定义按钮：[{text: 'text', callback: fn}, ...]
 *   closeBtn {boolean} 是否显示关闭按钮
 *   lockScroll {boolean} 是否锁定滚动
 *   baseClass {string} 给对话框容器增加 class，不会覆盖默认的 class
 *   background {string} 遮罩背景的颜色
 *   width {int} 提示框固定宽度
 *   height {int} 提示框固定高度
 *   zIndex {int} 提示框的层级
 *
 * @param {function} ok 点击确认时的回调函数
 * @param {function} no 点击取消时的回调函数
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto||window.$)}(function(a){var b,c;("function"==typeof Zepto||"object"==typeof Zepto)&&(b=function(a,b){return function(c){var d,e,f;return this?(f=this,e=f[a](),d={width:["left","right"],height:["top","bottom"]},d[a].forEach(function(a){f.css("box-sizing")&&"content-box"!==f.css("box-sizing")||(e+=parseInt(f.css("padding-"+a),10),b&&(e+=parseInt(f.css("border-"+a+"-width"),10))),c&&(e+=parseInt(f.css("margin-"+a),10))}),e):null}},["width","height"].forEach(function(a){var c=a.substr(0,1).toUpperCase()+a.substr(1);"undefined"==typeof Zepto.fn["inner"+c]&&(Zepto.fn["inner"+c]=b(a,!1)),"undefined"==typeof Zepto.fn["outer"+c]&&(Zepto.fn["outer"+c]=b(a,!0))})),c={dom:{},isElement:function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},isJquery:function(a){return a&&a.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1},isZepto:function(a){return a&&a.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(a)?!0:!1}},c.init=function(){var e=this;e.dom.docHtml=a("html"),e.dom.box=a("<div></div>",{id:"cxdialog","class":"cxdialog"}),e.dom.overlay=a("<div></div>",{id:"cxdialog_overlay","class":"cxdialog_overlay"}),e.dom.holder=a("<div></div>",{id:"cxdialog_holder","class":"cxdialog_holder"}),e.dom.title=a("<div></div>",{"class":"cxdialog_title"}),e.dom.info=a("<div></div>",{"class":"cxdialog_info"}),e.dom.btns=a("<div></div>",{"class":"cxdialog_btns"}),e.dom.closeBtn=a("<a></a>",{rel:"cxdialog",rev:"close"}),a(document).ready(function(){e.dom.box.appendTo("body").after(e.dom.overlay)}),e.isIE6=!!window.ActiveXObject&&!window.XMLHttpRequest,e.dom.box.on("click","a",function(){var c,d,f,a=this.rel,b=this.rev;if("cxdialog"===a){if("close"===b)e.exit();else for(d=0,f=e.btnCache.length;f>d;d++)if(e.btnCache[d].name===b&&"function"==typeof e.btnCache[d].callback){c=e.btnCache[d].callback();break}return c!==!1&&e.exit(),!1}})},c.format=function(b,c,d){var e=this;if(e.exit(),"string"!=typeof b||b.length){if("string"==typeof b||e.isElement(b)||e.isJquery(b)||e.isZepto(b))b={info:b};else if("object"!=typeof b)return;"function"==typeof c&&(b.ok=c),"function"==typeof d&&(b.no=d),b=a.extend({},a.cxDialog.defaults,b),e.dom.box.attr("class","cxdialog"),e.setContent(b),e.show(b)}},c.setContent=function(b){var e,f,g,h,i,c=this,d=(new Date).getTime();for(c.dom.box.empty(),"string"==typeof b.title&&b.title.length&&c.dom.title.html(b.title).appendTo(c.dom.box),c.infoCache=void 0,"string"==typeof b.info&&b.info.length?c.dom.info.html(b.info).appendTo(c.dom.box):c.isElement(b.info)||c.isJquery(b.info)||c.isZepto(b.info)?(e=c.isElement(b.info)?a(b.info):b.info,c.infoCache={dom:e},f=e.attr("style"),"string"==typeof f&&f.length&&(c.infoCache.styleText=f),c.dom.holder.css({"float":e.css("float"),display:e.css("display"),visibility:e.css("visibility"),position:e.css("position"),width:e.outerWidth(),height:e.outerHeight()}).insertAfter(e),e.css("display","block").appendTo(c.dom.box)):(b.info=String(b.info),c.dom.info.html(b.info).appendTo(c.dom.box)),c.btnCache=[],"function"==typeof b.ok&&c.btnCache.push({name:"btn_ok",className:"btn_ok",text:b.okText,callback:b.ok}),"function"==typeof b.no&&c.btnCache.push({name:"btn_no",className:"btn_no",text:b.noText,callback:b.no}),g=0,h=b.buttons.length;h>g;g++)c.btnCache.push({name:"btn_"+d+"_"+g,className:"btn_"+g,text:b.buttons[g].text,callback:b.buttons[g].callback});if(c.btnCache.length){for(i="",g=0,h=c.btnCache.length;h>g;g++)i+='<a class="'+c.btnCache[g].className+'" rel="cxdialog" rev="'+c.btnCache[g].name+'">'+c.btnCache[g].text+"</a>";c.dom.btns.html(i).appendTo(c.dom.box)}b.closeBtn&&c.dom.closeBtn.appendTo(c.dom.box)},c.show=function(a){var c,b=this;a.lockScroll===!0&&b.dom.docHtml.addClass("cxdialog_lock"),"string"==typeof a.background?b.dom.overlay.css("background",a.background):b.dom.overlay.css("display","none"),"string"==typeof a.baseClass&&a.baseClass.length&&b.dom.box.addClass(a.baseClass),c={},b.isIE6&&(c.top=document.documentElement.scrollTop+window.screen.availHeight/4),a.width>0?(c.width=a.width,c.marginLeft=-(a.width/2)):c.marginLeft=-(b.dom.box.outerWidth()/2),a.height>0?(c.height=a.height,c.marginTop=-(a.height/2)):c.marginTop=-(b.dom.box.outerHeight()/2),a.zIndex>0&&(c.zIndex=a.zIndex),b.dom.box.css(c).addClass("in")},c.backDom=function(){var a=this;a.infoCache&&(a.isJquery(a.infoCache.dom)||a.isZepto(a.infoCache.dom))&&("string"==typeof a.infoCache.styleText&&a.infoCache.styleText.length?a.infoCache.dom.attr("style",a.infoCache.styleText):a.infoCache.dom.removeAttr("style"),a.infoCache.dom.insertAfter(a.dom.holder),a.dom.holder.remove()),a.infoCache=void 0},c.exit=function(){var b=this;b.backDom(),b.btnCache=void 0,b.dom.box.removeClass("in").addClass("out"),"string"!=typeof a.cxDialog.defaults.background&&b.dom.overlay.css("display",""),b.dom.docHtml.removeClass("cxdialog_lock")},a.cxDialog=function(){c.format.apply(c,arguments)},a.cxDialog.close=function(){c.exit.apply(c)},a.cxDialog.defaults={title:"",info:"",ok:null,okText:"确 定",no:null,noText:"取 消",buttons:[],closeBtn:!0,lockScroll:!1,baseClass:"",background:"",width:0,height:0},c.init()});


/*!
 * jQuery cxSelect
 * @name jquery.cxselect.js
 * @version 1.4.0
 * @date 2016-04-01
 * @author ciaoca
 * @email ciaoca@gmail.com
 * @site https://github.com/ciaoca/cxSelect
 * @license Released under the MIT license
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto||window.$)}(function(a){var b=function(){var d,e,f,g,h,i;for(g=0,h=arguments.length;h>g;g++)b.isJquery(arguments[g])||b.isZepto(arguments[g])?d=arguments[g]:b.isElement(arguments[g])?d=a(arguments[g]):"function"==typeof arguments[g]?f=arguments[g]:"object"==typeof arguments[g]&&(e=arguments[g]);return i=new b.init(d,e),"function"==typeof f&&f(i),i};b.isElement=function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},b.isJquery=function(a){return a&&a.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1},b.isZepto=function(a){return a&&a.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(a)?!0:!1},b.getIndex=function(a,b){return b?a:a-1},b.getData=function(a,b){if("string"==typeof b&&b.length){b=b.split(".");for(var c=0,d=b.length;d>c;c++)a=a[b[c]]}return a},b.init=function(c,d){var f,g,e=this;(b.isJquery(c)||b.isZepto(c))&&(f={dom:{box:c}},e.attach=b.attach.bind(f),e.detach=b.detach.bind(f),e.setOptions=b.setOptions.bind(f),e.clear=b.clear.bind(f),f.changeEvent=function(){b.selectChange.call(f,this.className)},f.settings=a.extend({},a.cxSelect.defaults,d,{url:f.dom.box.data("url"),emptyStyle:f.dom.box.data("emptyStyle"),required:f.dom.box.data("required"),firstTitle:f.dom.box.data("firstTitle"),firstValue:f.dom.box.data("firstValue"),jsonSpace:f.dom.box.data("jsonSpace"),jsonName:f.dom.box.data("jsonName"),jsonValue:f.dom.box.data("jsonValue"),jsonSub:f.dom.box.data("jsonSub")}),g=f.dom.box.data("selects"),"string"==typeof g&&g.length&&(f.settings.selects=g.split(",")),e.setOptions(),e.attach(),f.settings.url||f.settings.data?a.isArray(f.settings.data)?b.start.call(f,f.settings.data):"string"==typeof f.settings.url&&f.settings.url.length&&a.getJSON(f.settings.url,function(a){b.start.call(f,a)}):b.start.apply(f))},b.setOptions=function(c){var e,f,g,d=this;if(c&&a.extend(d.settings,c),(!a.isArray(d.selectArray)||!d.selectArray.length||c&&c.selects)&&(d.selectArray=[],a.isArray(d.settings.selects)&&d.settings.selects.length))for(f=0,g=d.settings.selects.length;g>f&&(e=d.dom.box.find("select."+d.settings.selects[f]),e&&e.length);f++)d.selectArray.push(e);c&&(!a.isArray(c.data)&&"string"==typeof c.url&&c.url.length?a.getJSON(d.settings.url,function(a){b.start.call(d,a)}):b.start.call(d,c.data))},b.attach=function(){var a=this;a.attachStatus||a.dom.box.on("change","select",a.changeEvent),"boolean"==typeof a.attachStatus&&b.start.call(a),a.attachStatus=!0},b.detach=function(){var a=this;a.dom.box.off("change","select",a.changeEvent),a.attachStatus=!1},b.clear=function(a){var d,e,b=this,c={display:"",visibility:""};for(a=isNaN(a)?0:a,d=a,e=b.selectArray.length;e>d;d++)b.selectArray[d].empty().prop("disabled",!0),"none"===b.settings.emptyStyle?c.display="none":"hidden"===b.settings.emptyStyle&&(c.visibility="hidden"),b.selectArray[d].css(c)},b.start=function(c){var e,f,d=this;if(a.isArray(c)&&(d.settings.data=b.getData(c,d.settings.jsonSpace)),d.selectArray.length){for(e=0,f=d.selectArray.length;f>e;e++)"string"!=typeof d.selectArray[e].attr("data-value")&&d.selectArray[e][0].options.length&&d.selectArray[e].attr("data-value",d.selectArray[e].val());d.settings.data||"string"==typeof d.selectArray[0].data("url")&&d.selectArray[0].data("url").length?b.getOptionData.call(d,0):d.selectArray[0].prop("disabled",!1).css({display:"",visibility:""})}},b.getOptionData=function(c){var e,f,g,h,i,j,k,l,m,n,d=this;if(!("number"!=typeof c||isNaN(c)||0>c||c>=d.selectArray.length))if(e=c-1,f=d.selectArray[c],i=f.data("url"),j="undefined"==typeof f.data("jsonSpace")?d.settings.jsonSpace:f.data("jsonSpace"),k={},b.clear.call(d,c),"string"==typeof i&&i.length){if(e>=0){if(!d.selectArray[e].val().length)return;l=f.data("queryName"),m=d.selectArray[e].attr("name"),"string"==typeof l&&l.length?k[l]=d.selectArray[e].val():"string"==typeof m&&m.length&&(k[m]=d.selectArray[e].val())}a.getJSON(i,k,function(a){g=b.getData(a,j),b.buildOption.call(d,c,g)})}else if(d.settings.data&&"object"==typeof d.settings.data){for(g=d.settings.data,n=0;c>n;n++){if(h=b.getIndex(d.selectArray[n][0].selectedIndex,"boolean"==typeof d.selectArray[n].data("required")?d.selectArray[n].data("required"):d.settings.required),"object"!=typeof g[h]||!a.isArray(g[h][d.settings.jsonSub])||!g[h][d.settings.jsonSub].length){g=null;break}g=g[h][d.settings.jsonSub]}b.buildOption.call(d,c,g)}},b.buildOption=function(b,c){var k,l,m,d=this,e=d.selectArray[b],f="boolean"==typeof e.data("required")?e.data("required"):d.settings.required,g="undefined"==typeof e.data("firstTitle")?d.settings.firstTitle:e.data("firstTitle"),h="undefined"==typeof e.data("firstValue")?d.settings.firstValue:e.data("firstValue"),i="undefined"==typeof e.data("jsonName")?d.settings.jsonName:e.data("jsonName"),j="undefined"==typeof e.data("jsonValue")?d.settings.jsonValue:e.data("jsonValue");if(a.isArray(c)){if(k=f?"":'<option value="'+String(h)+'">'+String(g)+"</option>","string"==typeof i&&i.length)for("string"==typeof j&&j.length||(j=i),l=0,m=c.length;m>l;l++)k+='<option value="'+String(c[l][j])+'">'+String(c[l][i])+"</option>";else for(l=0,m=c.length;m>l;l++)k+='<option value="'+String(c[l])+'">'+String(c[l])+"</option>";e.html(k).prop("disabled",!1).css({display:"",visibility:""}),"string"==typeof e.attr("data-value")&&(e.val(String(e.attr("data-value"))).removeAttr("data-value"),e[0].selectedIndex<0&&(e[0].options[0].selected=!0)),(f||e[0].selectedIndex>0)&&e.trigger("change")}},b.selectChange=function(a){var d,e,f,c=this;if("string"==typeof a&&a.length){for(a=a.replace(/\s+/g,","),a=","+a+",",e=0,f=c.selectArray.length;f>e;e++)if(a.indexOf(","+c.settings.selects[e]+",")>-1){d=e;break}"number"==typeof d&&d>-1&&(d+=1,b.getOptionData.call(c,d))}},a.cxSelect=function(){return b.apply(this,arguments)},a.cxSelect.defaults={selects:[],url:null,data:null,emptyStyle:null,required:!1,firstTitle:"请选择",firstValue:"",jsonSpace:"",jsonName:"n",jsonValue:"",jsonSub:"s"},a.fn.cxSelect=function(b,c){return this.each(function(){a.cxSelect(this,b,c)}),this}});


/*!
 * cxUpPicture 1.0
 * http://code.ciaoca.com/
 * E-mail: ciaoca@gmail.com
 * Released under the MIT license
 * Date: 2016-06-02
 * 
 * @param {object} settings 参数设置
 *   maxLength {int} 最多上传数量
 *   maxWidth {int} 最大宽度
 *   maxHeight {int} 最大高度
 *   haveClass {string} 包含文件时的 className
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto||window.$)}(function(a){a.cxUpPicture=function(){var b={dom:{},isElement:function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},isJquery:function(a){return a&&a.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1},isZepto:function(a){return a&&a.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(a)?!0:!1}};b.init=function(){var c,d,e,b=this;for(d=0,e=arguments.length;e>d;d++)b.isJquery(arguments[d])||b.isZepto(arguments[d])?b.dom.box=arguments[d]:b.isElement(arguments[d])?b.dom.box=a(arguments[d]):"object"==typeof arguments[d]&&(c=arguments[d]);b.dom.box.length&&(b.settings=a.extend({},a.cxUpPicture.defaults,c,{maxLength:b.dom.box.data("maxLength"),maxWidth:b.dom.box.data("maxWidth"),maxHeight:b.dom.box.data("maxHeight"),haveClass:b.dom.box.data("haveClass")}),b.dom.fileCanvas=document.createElement("canvas"),b.tmpHtml=a("<div></div>").html(b.dom.box.find("li").last().clone()).html(),b.dom.box.on("click","a",function(){var c=this,d=c.rel,e=a(c).closest("li");"remove"===d&&(event.preventDefault(),"string"==typeof c.dataset.urlDelete&&c.dataset.urlDelete.length?(e.css("display","none"),a.ajax({url:c.dataset.urlDelete,type:"GET",dataType:"json"}).done(function(){e.remove()}).fail(function(){e.css("display","")})):e.remove(),b.addFile())}),b.dom.box.on("change","input",function(){var c,d;"file"===this.type&&(c=this.files[0],d=a(this).closest("li"),EXIF.getData(c,function(){var a=EXIF.getTag(this,"Orientation"),e=0;switch(a){case 3:e=180;break;case 6:e=90;break;case 8:e=270;break;default:e=0}_fileImg=new MegaPixImage(c),_fileImg.render(b.dom.fileCanvas,{maxWidth:b.settings.maxWidth,maxHeight:b.settings.maxHeight,orientation:a}),setTimeout(function(){var a=b.dom.fileCanvas.toDataURL();d.addClass(b.settings.haveClass).css({backgroundImage:"url("+a+")"}),d.find("input[type=hidden]").length&&d.find("input[type=hidden]").val(a),b.addFile()},200)}))}))},b.addFile=function(){var a=this;(!a.dom.box.find("li").length||a.dom.box.find("li").length<a.settings.maxLength&&a.dom.box.find("li").last().hasClass(a.settings.haveClass))&&a.dom.box.append(a.tmpHtml)},b.init.apply(b,arguments)},a.cxUpPicture.defaults={maxLength:9,maxWidth:200,maxHeight:200,haveClass:"have"},a.fn.cxUpPicture=function(b){return this.each(function(){a.cxUpPicture(this,b)}),this}});


/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 *
*/
function Swipe(a,b){"use strict";function m(){var c,d;for(g=f.children,j=g.length,g.length<2&&(b.continuous=!1),e.transitions&&b.continuous&&g.length<3&&(f.appendChild(g[0].cloneNode(!0)),f.appendChild(f.children[1].cloneNode(!0)),g=f.children),h=new Array(g.length),i=a.getBoundingClientRect().width||a.offsetWidth,f.style.width=g.length*i+"px",c=g.length;c--;)d=g[c],d.style.width=i+"px",d.setAttribute("data-index",c),e.transitions&&(d.style.left=c*-i+"px",r(c,k>c?-i:c>k?i:0,0));b.continuous&&e.transitions&&(r(p(k-1),-i,0),r(p(k+1),i,0)),e.transitions||(f.style.left=k*-i+"px"),a.style.visibility="visible"}function n(){b.continuous?q(k-1):k&&q(k-1)}function o(){b.continuous?q(k+1):k<g.length-1&&q(k+1)}function p(a){return(g.length+a%g.length)%g.length}function q(a,c){var f,j,m;if(k!=a){if(e.transitions){for(f=Math.abs(k-a)/(k-a),b.continuous&&(j=f,f=-h[p(a)]/i,f!==j&&(a=-f*g.length+a)),m=Math.abs(k-a)-1;m--;)r(p((a>k?a:k)-m-1),i*f,0);a=p(a),r(k,i*f,c||l),r(a,0,c||l),b.continuous&&r(p(a-f),-(i*f),0)}else a=p(a),t(k*-i,a*-i,c||l);k=a,d(b.callback&&b.callback(k,g[k]))}}function r(a,b,c){s(a,b,c),h[a]=b}function s(a,b,c){var d=g[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)"+"translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function t(a,c,d){var e,h;return d?(e=+new Date,h=setInterval(function(){var i=+new Date-e;return i>d?(f.style.left=c+"px",u&&w(),b.transitionEnd&&b.transitionEnd.call(event,k,g[k]),clearInterval(h),void 0):(f.style.left=(c-a)*(Math.floor(100*(i/d))/100)+a+"px",void 0)},4),void 0):(f.style.left=c+"px",void 0)}function w(){v=setTimeout(o,u)}function x(){u=0,clearTimeout(v)}var f,g,h,i,j,k,l,u,v,y,z,A,B,c=function(){},d=function(a){setTimeout(a||c,0)},e={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var c,b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a)return f=a.children[0],b=b||{},k=parseInt(b.startSlide,10)||0,l=b.speed||300,b.continuous=void 0!==b.continuous?b.continuous:!0,u=b.auto||0,y={},z={},B={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":d(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(a));break;case"resize":d(m)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];y={x:b.pageX,y:b.pageY,time:+new Date},A=void 0,z={},f.addEventListener("touchmove",this,!1),f.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];z={x:c.pageX-y.x,y:c.pageY-y.y},"undefined"==typeof A&&(A=!!(A||Math.abs(z.x)<Math.abs(z.y))),A||(a.preventDefault(),x(),b.continuous?(s(p(k-1),z.x+h[p(k-1)],0),s(k,z.x+h[k],0),s(p(k+1),z.x+h[p(k+1)],0)):(z.x=z.x/(!k&&z.x>0||k==g.length-1&&z.x<0?Math.abs(z.x)/i+1:1),s(k-1,z.x+h[k-1],0),s(k,z.x+h[k],0),s(k+1,z.x+h[k+1],0)))}},end:function(){var j,c=+new Date-y.time,d=Number(c)<250&&Math.abs(z.x)>20||Math.abs(z.x)>i/2,e=!k&&z.x>0||k==g.length-1&&z.x<0;b.continuous&&(e=!1),j=z.x<0,A||(d&&!e?(j?(b.continuous?(r(p(k-1),-i,0),r(p(k+2),i,0)):r(k-1,-i,0),r(k,h[k]-i,l),r(p(k+1),h[p(k+1)]-i,l),k=p(k+1)):(b.continuous?(r(p(k+1),i,0),r(p(k-2),-i,0)):r(k+1,i,0),r(k,h[k]+i,l),r(p(k-1),h[p(k-1)]+i,l),k=p(k-1)),b.callback&&b.callback(k,g[k])):b.continuous?(r(p(k-1),-i,l),r(k,0,l),r(p(k+1),i,l)):(r(k-1,-i,l),r(k,0,l),r(k+1,i,l))),f.removeEventListener("touchmove",B,!1),f.removeEventListener("touchend",B,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==k&&(u&&w(),b.transitionEnd&&b.transitionEnd.call(a,k,g[k]))}},m(),u&&w(),e.addEventListener?(e.touch&&f.addEventListener("touchstart",B,!1),e.transitions&&(f.addEventListener("webkitTransitionEnd",B,!1),f.addEventListener("msTransitionEnd",B,!1),f.addEventListener("oTransitionEnd",B,!1),f.addEventListener("otransitionend",B,!1),f.addEventListener("transitionend",B,!1)),window.addEventListener("resize",B,!1)):window.onresize=function(){m()},{setup:function(){m()},slide:function(a,b){x(),q(a,b)},prev:function(){x(),n()},next:function(){x(),o()},stop:function(){x()},getPos:function(){return k},getNumSlides:function(){return j},kill:function(){var a,b;for(x(),f.style.width="",f.style.left="",a=g.length;a--;)b=g[a],b.style.width="",b.style.left="",e.transitions&&s(a,0,0);e.addEventListener?(f.removeEventListener("touchstart",B,!1),f.removeEventListener("webkitTransitionEnd",B,!1),f.removeEventListener("msTransitionEnd",B,!1),f.removeEventListener("oTransitionEnd",B,!1),f.removeEventListener("otransitionend",B,!1),f.removeEventListener("transitionend",B,!1),window.removeEventListener("resize",B,!1)):window.onresize=null}}}(window.jQuery||window.Zepto)&&function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto);
